# AffineCarpetProject
## Introduction
This project was created to collect data for my Summer 2020 REU with the University of Conneticut. During this REU, my research group studied a [fractal](https://en.wikipedia.org/wiki/Fractal) called the [Affine Sierpinski Carpet](https://demonstrations.wolfram.com/SelfAffineVariantsOfTheSierpinskiCarpet/), which is a generalized version of the more well-known [Sierpinski Carpet](https://en.wikipedia.org/wiki/Sierpinski_carpet). Specifically, we studied how the resistance of the fractal changed as the precarpet level increased. The bounds for this value are closly related to two objects that are easier to compute than the continuous shape, the cross graph and the x graph representation of the precarpet.
### What is a precarpet?
A true fractal is a shape that has had a function applied to it an infinite amount of times, which is impossible to do on a computer. However, a precarpet only has the function applied to it a finite number of times, making it computable. The number of times the function is applied to the precarpet is dependent on its level. So, for the self-similar Sierpinski Carpet, a level 0 precarpet is the unit square, the level 1 precarpet is 8 unit squares assembled into a square, the level 2 precarpet is 8 level 1 precarpets assembled in a square, and so on.
### How do we represent these with cross and X graphs?
Any level affine precarpet is a collection of squares and rectangles. Level 0 is one square, level 1 is four squares and four rectangles, A cross graph replaces each of these rectangles with a "+" shape. The center point goes into the middle of the rectangle and each outer point, all of which share an edge with the center point, is placed at the middle of the side it extends to. An X graph replaces each rectangle with an "x" shape. The center point again goes into the middle of the shape it has replaced, but instead the vertices go into the corners of the rectangle.
### What is resistance?
Resistance in mathematics is analogous to resistance in electrical circuits. But before discussing resistance, we must discuss graph energy. When a function is applied to a graph (that is to say, each vertex in a graph is assigned a numerical value), the energy is half the sum of all the squared differences between every point's function value and all its neighbors' function values. Resistance is the reciprocal of the lowest possible energy the graph can have. While any function on a graph can have its energy calculated, a graph itself has a unique resistance value dependent on finding the function that gives the lowest possible energy. The unique function that accomplishes this is called the harmonic function.
### How do we calculate the harmonic function?
We use what is known as [relaxation](https://en.wikipedia.org/wiki/Relaxation_(iterative_method)). The harmonic function has the averaging property, meaning that each point's harmonic function value will be the average of its neighbor's harmonic function values. This allows the problem of finding the harmonic function to become a system of linear equations, allowing the relaxation method to work. It is implemented into the code as follows:
1) Apply an arbitrary function to all the points on the graph
2) Loop through all the points, changing their function values to be the average of their neighbors' function values (this is referred to as one relaxation)
3) Repeat step 2 as many times as is necessary for an accurate estimate
The closer the arbitrary function applied in step 1 is to the values of the true harmonic, the less times step 2 will need to be repeated. Typically, about 500 relaxations or more are needed to calculate useful estimates when using the method used in this program to apply the initial function (this is discussed in the __Generating Carpets__ section).
## How to Collect Affine Carpet Data
#### Generating and Storing Carpet and Harmonic Function Data
To calculate the resistance of affine crosswire and X carpets, the carpets first have to be made and have the harmonic function applied to them. ``saveHarmonicFunction.py`` is dedicated to this purpose. Lines 8 to 18 serve as the input for the user to define which carpet they would like to calculate. The first input variable is ``precarpet_level``, which determines what level of precarpet you want. Before making a precarpet of level n, precarpet level n-1 of that affine carpet must first be made. This is because the initial function applied when calculating the harmonic function is created from the previous level's harmonic function (every cross or X is turned into a level 1 precarpet matching the dimensions of the cross or X) to allow for the best estimates with the least amount of relaxations. The next input variable is ``sideOFSmallSquares``. This is how large the 4 small squares in the corners will be. The value must be between 0 and 1, as this program assumes all affine carpets have side lengths of 1x1 (before stretching, which I'll discuss shortly). Because of this assumption, the affine carpet can be defined by just this one variable, making it easy to sort the data made by this project. The third input is ``numRuns``, which decides how many relaxations are run after the initial function is placed onto. In my experience, the optimal amount of runs is dependent on how high of a carpet level you're working with. A level 1 carpet will take about 30 seconds to apply 100,000 relaxations, giving you a very accurate base to start with and not take too much time to compute. Later levels take exponentially longer per relaxation, so having the previous levels be as accurate as possible can reduce the computing time needed for good estimates of harmonic functions by a huge amount. This number is also recorded in the data for the carpet, so you can see how accurate the estimate is. The fourth variable is ``kindOfGraph``, which is simply a string with the value of "+" or "x". This determines whether you want to calculate a cross or X graph, respectively. The two carpets require completely different constructions, so the data is sorted by cross graphs and X graphs. Having the level 3 cross graph for an affine carpet will not allow you to create the level 4 X graph. 
